/* ---------- New Theme & Base Styles ---------- */
    body {
      /* Pink/Blue/Red mix as requested, via a soft gradient */
      background: linear-gradient(120deg, #f6d365 0%, #fda085 100%);
      background: linear-gradient(to top right, #ffdde1 0%, #e0c3fc 50%, #8ec5fc 100%);
    }

    .card {
      /* Frosted glass effect for cards */
      background: rgba(255, 255, 255, 0.85);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.3);
    }
    
    header {
      /* Subtle gradient border for the header */
      background: white;
      border-bottom: 4px solid;
      border-image: linear-gradient(to right, #d63384, #8ec5fc, #0d6efd) 1;
    }
    
    /* ---------- Basic UI helpers (re-styled) ---------- */
    .input {
      width: 100%;
      border-radius: 0.75rem;
      border: 1px solid #cbd5e1;
      padding: 0.5rem 0.75rem;
      outline: none;
      background: #fff;
      transition: all 0.2s ease;
    }
    .input:focus {
      box-shadow: 0 0 0 3px rgba(13, 110, 253, 0.35);
      border-color: #0d6efd;
    }

    .btn-primary {
      display: inline-flex; align-items: center; justify-content: center;
      border-radius: 0.75rem; padding: 0.5rem 1rem;
      /* Pink/Blue gradient for primary buttons */
      background: linear-gradient(to right, #d63384, #0d6efd);
      color: #fff; font-weight: 500;
      transition: all 0.3s ease;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    .btn-primary:hover { opacity: 0.9; box-shadow: 0 6px 15px rgba(0,0,0,0.15); }
    .btn-primary:active { transform: scale(0.98); }

    .btn-outline {
      display: inline-flex; align-items: center; justify-content: center;
      border-radius: 0.75rem; padding: 0.5rem 1rem;
      border: 1px solid #0d6efd; color: #0d6efd; background: #fff;
      transition: all 0.2s ease;
    }
    .btn-outline:hover { background: #f0f5ff; }

    .btn-ghost {
      display: inline-flex; align-items: center; justify-content: center;
      border-radius: 0.75rem; padding: 0.5rem 0.75rem;
      background: transparent; color: #0d6efd;
      transition: all 0.2s ease;
    }
    .btn-ghost:hover { background: #f0f5ff; }

    .lbl { font-size: 0.75rem; font-weight: 500; color: #475569; }

    /* Cards / boxes / tables */
    .card { border-radius: 1rem; box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -4px rgba(0,0,0,0.1); padding: 1rem; }
    @media (min-width: 768px) { .card { padding: 1.5rem; } }
    .card-title { font-size: 1.25rem; font-weight: 600; margin-bottom: 1rem; color: #1e3a8a; }

    .box { border: 1px solid #e5e7eb; border-radius: 0.75rem; padding: 0.75rem; background: #fff; }
    .box-title { font-size: 0.875rem; font-weight: 600; margin-bottom: 0.5rem; }

    .table-wrap { overflow: auto; border: 1px solid #e5e7eb; border-radius: 0.5rem; }
    .table { width: 100%; font-size: 0.875rem; border-collapse: separate; border-spacing: 0; }
    .table th.th {
      text-align: left; font-weight: 600; padding: 0.5rem; border-bottom: 1px solid #e5e7eb; background: #f8fafc;
    }
    .table td.td { padding: 0.5rem; border-bottom: 1px solid #e5e7eb; vertical-align: top; }

    .kpi {
      background: #f8fafc; border: 1px solid #e5e7eb; border-radius: 0.75rem; padding: 0.75rem; font-size: 0.875rem;
    }
    .kpi-value { display: block; font-size: 1.5rem; font-weight: 700; margin-top: 0.25rem; }

    .nav-btn {
      width: 100%; text-align: left; padding: 0.5rem 0.75rem; border-radius: 0.75rem; background: transparent; border: none; cursor: pointer;
      font-weight: 500; transition: all 0.2s ease;
    }
    .nav-btn:hover { background: #f1f5f9; }
    .nav-btn.active {
      /* Active nav button with new theme */
      background: linear-gradient(to right, #d63384, #0d6efd); 
      color: #fff;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }

    /* Printable A4 area (screen preview card) */
    .print-a4 {
      width: 1122px; max-width: 1122px; /* Fixed width, parent will scroll */
      margin: 0 auto;
      background: #fff; border: 1px solid #e5e7eb; border-radius: 12px; padding: 24px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }

    /* Row action links */
    .table .action { color: #0369a1; cursor: pointer; text-decoration: none; }
    .table .action:hover { text-decoration: underline; }

    
    /* ---------- Strict A4 landscape for printing (FIXED) ---------- */
    @page { size: A4 landscape; margin: 10mm; }
    
    @media print {
      body {
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
        background: #fff !important;
      }

      /* 1. Hide the shell UI */
      #login-screen, 
      #app-shell > header, 
      #sidebar, 
      #mobile-drawer, 
      footer {
        display: none !important;
      }
      
      /* 2. Hide the non-printing pages */
      #page-dashboard,
      #page-masters,
      #page-reports,
      #page-settings {
        display: none !important;
      }
      
      /* 3. On the pages that *can* print, hide their UI... */
      #page-lr .card-title,
      #page-lr > .flex, /* Button bar */
      #page-lr > .grid, /* Form grids */
      #page-lr > .box, /* Form boxes */
      #page-invoice .card-title,
      #page-invoice > .flex, /* Button bar */
      #page-invoice > .grid, /* Form grids */
      #page-invoice > .box { /* Form boxes */
        display: none !important;
      }
      
      /* 4. Reset containers */
      #app-shell, #content, .card {
        padding: 0 !important;
        margin: 0 !important;
        border: none !important;
        box-shadow: none !important;
        background: #fff !important;
      }
      
      /* 5. Reset the printable wrapper and area */
      .overflow-x-auto {
        overflow: visible !important; /* Allow content to flow naturally */
        margin: 0 !important;
        padding: 0 !important;
        width: 100% !important;
      }

      .print-a4 {
        width: 100% !important;
        max-width: 100% !important;
        height: 100% !important;
        padding: 0 !important;
        margin: 0 !important;
        border: none !important;
        box-shadow: none !important;
      }
      
      .a4-landscape {
        border: none !important;
        padding: 0 !important;
        margin: 0 !important;
        width: 100% !important;
        min-height: 0 !important;
      }
    }


    /* ---------- A4 landscape canvas (on-screen) ---------- */
    .a4-landscape {
      width: 280mm; 
      min-height: 198mm; 
      background: #fff;
      border: 4px solid #000000; 
      border-radius: 12px; 
      
      /* UPDATED: 
        This now means 4mm padding on the top/bottom,
        and only 2mm padding on the left/right.
      */
      padding: 4mm 2mm; 
      
      margin: 0 auto;
      /* ADDED: This was in my previous suggestions, 
        make sure it's still here! */
      box-sizing: border-box; 
    }

    /* Blue rules & section boxes (from original) */
    .rule { height: 2px; background: #dbeafe; margin: 6px 0 12px; }
    .rule-blue { background: #2563eb; }
    .lr-box { border: 1px solid #2563eb; border-radius: 8px; padding: 6px 8px; }
    .box-title {
      font-weight: 700; color: #1e40af; border-bottom: 1px dashed #93c5fd; padding-bottom: 2px; margin-bottom: 6px;
    }
    .box-line { display: flex; gap: 6px; align-items: baseline; line-height: 1.35; }

    /* Header typography */
    .lr-title { font-size: 20pt; font-weight: 800; letter-spacing: 0.5px; }
    .lr-sub { font-size: 9.5pt; }

    /* Simple grid system for print layout rows/cols */
    .lr-row { display: flex; flex-wrap: wrap; gap: 6px; }
    .lr-col { flex: 1 0 0; }
    .lr-col-12 { flex-basis: 100%; }
    .lr-col-6 { flex-basis: calc(50% - 6px); }
    .lr-col-3 { flex-basis: calc(25% - 6px); }

    .lbl { font-size: 10pt; color: #334155; font-weight: 600; }

    /* Goods grid table with blue borders */
    .grid-table { width: 100%; border-collapse: collapse; border: 1px solid #2563eb; font-size: 10pt; }
    .grid-table thead th {
      border: 1px solid #2563eb; background: #eff6ff; padding: 6px; text-align: center; font-weight: 700;
    }
    .grid-table td { border: 1px solid #93c5fd; padding: 6px; text-align: right; }
    .grid-table tfoot td { border-top: 2px solid #2563eb; font-weight: 700; }

    .text-left { text-align: left; }
    .text-right { text-align: right; }
    .mt-4 { margin-top: 4mm; }
    .mt-8 { margin-top: 4mm; }

    /* Signature line */
    .sign-line {
      margin-top: 8mm; border-top: 1px solid #2563eb; display: inline-block; padding-top: 2mm; min-width: 60mm; text-align: center;
    }
    
    /* ---------- NEW Toast Notification System ---------- */
    #toast-container {
      position: fixed;
      top: 1.5rem;
      right: 1.5rem;
      z-index: 1000;
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      max-width: 320px;
      width: 100%;
    }
    .toast {
      background: white;
      color: #333;
      padding: 1rem;
      border-radius: 0.5rem;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      font-size: 0.875rem;
      display: flex;
      align-items: center;
      gap: 0.75rem;
      opacity: 0;
      transform: translateX(100%);
      animation: toast-in 0.5s forwards;
    }
    .toast.error { border-left: 4px solid #dc3545; }
    .toast.success { border-left: 4px solid #198754; }
    
    @keyframes toast-in {
      to { opacity: 1; transform: translateX(0); }
    }
    @keyframes toast-out {
      from { opacity: 1; transform: translateX(0); }
      to { opacity: 0; transform: translateX(100%); }
    }
